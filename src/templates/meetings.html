<html data-bs-theme="dark">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        function clickMeeting(meeting, pdfFilepath) {
            document.getElementById('meetingDate').innerText = meeting['when'];
            document.getElementById('meetingPdfUrl').href = pdfFilepath;
            // TODO: is public hearing
            document.getElementById('meetingProjects').replaceChildren(
                ...meeting.projects.map(project => {
                    const tr = document.createElement('tr');
                    tr.replaceChildren(
                        td(project['description']),
                        td(project['location']),
                        td(project['councilmember']),
                    );
                    return tr;
                })
            );
        }

        function td(text) {
            const td = document.createElement('td');
            td.innerText = text;
            return td;
        }
    </script>

    <style>
        .divider {
            height: 100vh;
            width: 1.5rem;
            background-color: rgba(0, 0, 0, .1);
            box-shadow: inset 0 .125em .5em rgba(0, 0, 0, .1);
        }
    </style>

    <div class="d-flex">
        <div class="p-3">
            <ul class="list-unstyled">
                {% for meeting in meetings %}
                    <li class="mt-2">
                        <a
                            href="#"
                            onclick="clickMeeting(
                                {{ meeting.jsonify() }},
                                '{{ url_for("static", filename=meeting.when.isoformat(sep=" ") + ".pdf") }}',
                            )"
                            class="link-body-emphasis d-inline-flex text-decoration-none rounded">
                            {{ meeting.when.strftime('%B %-d %Y') }} ({{ meeting.projects|length }})
                        </a>
                    </li>
                {% endfor %}
            </ul> 
        </div>

        <div class="divider"></div>

        <div class="p-3">
            <div id="meetingDate"></div>
            <!-- TODO: statically hosted -->
            <a id="meetingPdfUrl">Official agenda PDF</a>
            <table class="table">
                <thead>
                    <th scope="col">Name and description</th>
                    <th scope="col">Location</th>
                    <th scope="col">Councilmember</th>
                </thead>
                <tbody id="meetingProjects"></tbody>
            </table>
        </div>
    </div>
</html>